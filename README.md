# WebSocket STOMP Load Test Tool (ws-loadtest)

## 프로젝트 소개

이 프로젝트는 **Go 언어 기반의 웹소켓 STOMP 부하테스트 도구**입니다.  
동시 다수의 클라이언트가 웹소켓 서버에 접속하여 메시지를 송수신하고,  
**실시간 품질 지표 - 연결/메시지/지연/안정성/손실률**을 수집·분석할 수 있습니다.

본 도구는  
- **수백명에 가까운 동시 사용자/메시지 부하를 시뮬레이션**  
- **시스템 병목 및 성능 한계 파악**  
- **지표 자동 집계 및 JSON 파일 저장**  

와 같이 백엔드 성능 튜닝, 구조 개선, 품질 모니터링 자동화에 특화되어 있습니다.

---

## 주요 기능

- **동시 수백~수천 명의 웹소켓 클라이언트 연결** (Go 고루틴 기반)
- **STOMP 프로토콜 메시지 송수신 지원**
- **연결/메시지/지연/손실/안정성 등 다양한 품질 지표(metrics) 측정**
- **메시지 송신/수신/손실률, 평균/최대/95% 지연시간 자동 통계**
- **부하테스트 반복 자동화, 회차별 결과 파일 저장**
- **테스트 결과를 JSON(metrics.json) 파일로 내보내어 후처리 및 대시보드 연동 가능**
- **코드 구조를 metrics/ (지표), wsclient/ (클라이언트) 등 관심사별로 분리, 유지보수 용이**

---

## 파일 구조

```

├─ main.go                  # 프로그램 실행 진입점
├─ go.mod, go.sum    # Go 의존성 관리 파일
├─ metrics/                 # 품질 지표(연결, 메시지, 지연, 손실 등) 모듈
│    ├─ connection.go
│    ├─ message.go
│    ├─ latency.go
│    ├─ stability.go
│    ├─ deliveryStats.go
│    └─ metrics.go
└─ wsclient/              # 웹소켓 클라이언트/연결/유저 관리 로직
    ├─ client.go
    ├─ conn.go
    ├─ pubsub.go
    ├─ safeSet.go
    ├─ users.go
    ├─ types.go
    └─ wsnetconn.go
        

```

---

## 활용 예시

- **백엔드 서버(웹소켓/STOMP) 최대 동시 접속 한계, 메시지 처리량, 손실률 등 실측**
- **Spring Boot와 같은 백엔드와 부하테스트**
- **Redis 등 Pub/Sub 구조 개선 전후 품질지표 정량 비교**


---

## 개발/리팩토링 방식

본 도구는  
- **실무 수준의 코드 구조와 테스트 자동화 경험과**  
- **지표 중심의 성능 튜닝/품질 분석 기반 아키텍처 개선 과정**  
을 목표로,  

**ChatGPT와 함께 논의/설계/리팩토링하며 개발**되었습니다.
